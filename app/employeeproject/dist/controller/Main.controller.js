sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/m/MessageToast"],(e,t,s,i)=>{"use strict";return e.extend("com.sap.employeeproject.controller.Main",{onInit(){const e=new t({ID:"",fname:"",lname:"",mobile:"",email:"",address:"",salary:""});this.getView().setModel(e,"EmployeeModel")},async onCreate(){let e=this.byId("table").getSelectedItems();if(e.length>0){return s.warning("please unselect")}this.oDialog??=await this.loadFragment({name:"com.sap.employeeproject.fragments.create"});this.oDialog.open()},onCancel(){this.getView().getModel("EmployeeModel").setProperty("/",{});this.oDialog.close()},async onEditFragment(){this.oDialogUpdate??=await this.loadFragment({name:"com.sap.employeeproject.fragments.edit"});this.oDialogUpdate.open()},onUpdateCancel(){this.getView().getModel("EmployeeModel").setProperty("/",{});this.oDialogUpdate.close()},onSave(){const e=this.getView().getModel("EmployeeModel").getProperty("/"),t=this.getView().getModel(),n="/Employees";if(!e.fname||!e.salary||!e.address||!e.mobile){return s.warning("Please Enter mandatory Fields")}let o=Number(e.salary);if(isNaN(o)){return s.warning("Please enter a valid salary.")}e.salary=Number.isInteger(o)?o.toFixed(2):o.toFixed(2);t.create(n,e,{success:function(e){i.show("Create SuccessFully");this.byId("table").getBinding("items").refresh();this.onCancel()}.bind(this),error:function(e){s.error("Error Occurs!!");this.byId("table").getBinding("items").refresh();this.onCancel()}.bind(this)})},onDelete(){const e=this.byId("table").getSelectedItems(),t=this.getView().getModel();if(e.length<1){return s.warning("Please Select at least one item for deletion")}e.forEach(e=>{let n=e.getBindingContext().getPath();t.remove(n,{success:function(e){i.show("Successfully deleted");this.byId("table").getBinding("items").refresh()}.bind(this),error:function(e){s.warning("Error Occurs");this.byId("table").getBinding("items").refresh()}})})},onEdit(){let e=this.byId("table").getSelectedItems();if(e.length>1){return s.warning("please select only one Item")}if(e.length<1){return s.warning("please select atlesast one Item")}let t=e[0];let i=t.getBindingContext().getObject();let n=t.getBindingContext().getPath();this.getView().getModel("EmployeeModel").setData(i);this.onEditFragment()},onUpdate(){let e=this.byId("table").getSelectedItem().getBindingContext().getPath();let t=this.getView().getModel("EmployeeModel").getProperty("/");let n=this.getView().getModel();n.update(e,t,{success:function(e){i.show("Successfully updated");this.byId("table").getBinding("items").refresh();this.onUpdateCancel()}.bind(this),error:function(e){s.warning("Error Occurs");this.byId("table").getBinding("items").refresh();this.onUpdateCancel()}})}})});
//# sourceMappingURL=Main.controller.js.map